const 沖縄県所属未定地 = {"prefecture":"沖縄県","name":"所属未定地","latlons":[[{"lon":127.8416394418068,"lat":26.43530889209177},{"lon":127.84166666698322,"lat":26.43533261261001},{"lon":127.84221416255366,"lat":26.435809441252786},{"lon":127.84243639402439,"lat":26.436076387015703},{"lon":127.84255693915145,"lat":26.43641027921109},{"lon":127.8427963944381,"lat":26.4371483330292},{"lon":127.84293972838577,"lat":26.43723555917376},{"lon":127.84294583658118,"lat":26.43723916185786},{"lon":127.84622944213515,"lat":26.435184720898178},{"lon":127.84489325641869,"lat":26.433333333366704},{"lon":127.84379722386292,"lat":26.431814721072556},{"lon":127.84377307436796,"lat":26.43177655924086},{"lon":127.8437454471947,"lat":26.43173291873927},{"lon":127.84377791182125,"lat":26.431713387263073},{"lon":127.84379403396758,"lat":26.431701080940172},{"lon":127.8438059140118,"lat":26.431689693724422},{"lon":127.84381341076039,"lat":26.431678026819554},{"lon":127.84381758811129,"lat":26.431667639649902},{"lon":127.84166666698322,"lat":26.432943053679026},{"lon":127.8410091960177,"lat":26.433333333366704},{"lon":127.84063111473428,"lat":26.43355777537107},{"lon":127.84114888501313,"lat":26.434788333015206},{"lon":127.84121832706421,"lat":26.43476110783888},{"lon":127.84122832662602,"lat":26.434756945776485},{"lon":127.84136499389946,"lat":26.434703053902865},{"lon":127.84138499392236,"lat":26.434695279263792},{"lon":127.84141250328446,"lat":26.434669162052217},{"lon":127.84148888540379,"lat":26.434665829164715},{"lon":127.8415669393628,"lat":26.434629721384567},{"lon":127.84164888468833,"lat":26.434642775044097},{"lon":127.84166666698322,"lat":26.434657999667024},{"lon":127.84171805424491,"lat":26.434701945938116},{"lon":127.84180888487221,"lat":26.434698613050617},{"lon":127.84185805440576,"lat":26.43471499959759},{"lon":127.84189250293672,"lat":26.434760829049083},{"lon":127.8418708301747,"lat":26.43482638692825},{"lon":127.8418708301747,"lat":26.43490833315309},{"lon":127.84182165974185,"lat":26.434957224796165},{"lon":127.84173416290139,"lat":26.43497055904413},{"lon":127.84166666698322,"lat":26.435211667284648},{"lon":127.8416394418068,"lat":26.43530889209177}]],"polygons":[[{"x":2.2312575294069745,"y":0.4786815452747071},{"x":2.2312580045759423,"y":0.47868200761981633},{"x":2.2312675601762866,"y":0.4786913016777067},{"x":2.2312714388471524,"y":0.47869650484118753},{"x":2.231273542756517,"y":0.4787030129055503},{"x":2.23127772203968,"y":0.47871739875870384},{"x":2.231280223688997,"y":0.4787190989423078},{"x":2.231280330297118,"y":0.4787191691646804},{"x":2.2313376400253717,"y":0.4786791250110917},{"x":2.231314319185201,"y":0.4786430392866539},{"x":2.231295189808394,"y":0.47861344017643703},{"x":2.2312947683201942,"y":0.4786126963732697},{"x":2.231294286135058,"y":0.4786118457869549},{"x":2.2312948527496816,"y":0.47861146510384667},{"x":2.2312951341342178,"y":0.47861122524442357},{"x":2.2312953414801044,"y":0.478611003299108},{"x":2.2312954723230507,"y":0.47861077590246637},{"x":2.231295545231578,"y":0.4786105734488339},{"x":2.2312580045759423,"y":0.4786354323496621},{"x":2.2312465295428576,"y":0.4786430392866539},{"x":2.231239930779622,"y":0.4786474138948961},{"x":2.2312489675757567,"y":0.4786713988954264},{"x":2.2312501795681876,"y":0.47867086824228655},{"x":2.231250354093465,"y":0.47867078711843464},{"x":2.231252739387366,"y":0.4786697366980257},{"x":2.231253088453616,"y":0.47866958516057045},{"x":2.23125356858256,"y":0.4786690761034741},{"x":2.231254901702032,"y":0.4786690111413394},{"x":2.231256264000611,"y":0.4786683073557857},{"x":2.231257694216348,"y":0.47866856178782335},{"x":2.2312580045759423,"y":0.4786688585346706},{"x":2.2312589014528523,"y":0.47866971510240364},{"x":2.2312604867463603,"y":0.4786696501402509},{"x":2.2312613449166125,"y":0.47866996953460017},{"x":2.2312619461569003,"y":0.47867086280832133},{"x":2.231261567895845,"y":0.47867214061455876},{"x":2.231261567895845,"y":0.47867373785146705},{"x":2.2312607097098973,"y":0.47867469081277},{"x":2.231259182601946,"y":0.4786749507145637},{"x":2.2312580045759423,"y":0.4786796502321944},{"x":2.2312575294069745,"y":0.4786815452747071}]]};
 if(typeof cityObjs === 'undefined'){cityObjs = {};} cityObjs['沖縄県所属未定地'] = 沖縄県所属未定地;
{
  // Get N/S/E/W ends
  const getEnds = (polygons) => {
    // Get (x,y) array from vertex array(polygon)
    let xs = [];
    let ys = [];

    polygons.forEach((polygon) => {
      xs = xs.concat(polygon.map((v) => v.x));
      ys = ys.concat(polygon.map((v) => v.y));
    });
    // console.log({ xs, ys });

    // Prepare max/min proc
    const _max = (a, b) => Math.max(a, b);
    const _min = (a, b) => Math.min(a, b);

    // Get N/S/E/W ends values
    const n = ys.reduce(_min, 91);
    const s = ys.reduce(_max, 0);
    const e = xs.reduce(_max, 0);
    const w = xs.reduce(_min, 181);

    const ends = { n, s, e, w };
    // console.log(ends);

    // Return ends object
    return ends;
  };

  // Get N/S/E/W edge values from all of the polygons that is (x,y)s.
  const ends = getEnds(沖縄県所属未定地['polygons']);

  // Shape size on actual coordinate(before scaling)
  const shapeWidth = Math.abs(ends.w - ends.e);
  const shapeHeight = Math.abs(ends.s - ends.n);

  const SquareSize = 360;

  // Calcurate scale and margin.
  let shapeScale;
  let horizontalMargin = SquareSize * 0.1;
  let verticalMargin = SquareSize * 0.1;
  if (shapeWidth > shapeHeight) {
    shapeScale = (SquareSize - 2 * horizontalMargin) / shapeWidth;
    verticalMargin = (SquareSize - shapeHeight * shapeScale) / 2;
  } else {
    shapeScale = (SquareSize - 2 * verticalMargin) / shapeHeight;
    horizontalMargin = (SquareSize - shapeWidth * shapeScale) / 2;
  }

  const normalizedPolygons = 沖縄県所属未定地['polygons'].map( (polygon) => {
    return polygon.map( coordinates => {
        return {x: coordinates.x * shapeScale - ends.w * shapeScale + horizontalMargin, 
                y: -coordinates.y * shapeScale + ends.s * shapeScale + verticalMargin};
      });
  });

  沖縄県所属未定地['normalizedPolygons'] = normalizedPolygons;
}
      